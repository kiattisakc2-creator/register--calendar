<script src="js/data.js"></script>
    <script>
        let currentLang = 'th';

        function t(key) { return translations[currentLang][key] || key; }
        function toggleLangDropdown(e) { e.stopPropagation(); document.getElementById('lang-menu').classList.toggle('hidden'); }
        function closeLangDropdown(e) { if(!e.target.closest('.relative')) document.getElementById('lang-menu').classList.add('hidden'); }

        function changeLanguage(lang) {
            currentLang = lang;
            document.getElementById('lang-btn').innerHTML = `<span class="text-base">${lang==='th'?'üáπüá≠':'üá¨üáß'}</span> ${lang.toUpperCase()}`;
            document.getElementById('lang-menu').classList.add('hidden');
            
            document.querySelectorAll('[data-i18n]').forEach(el => {
                const key = el.getAttribute('data-i18n');
                if(translations[lang][key]) el.innerText = translations[lang][key];
            });
            
            // Modal Placeholders
            if(lang === 'th') {
                document.getElementById('new-title').placeholder = "‡πÄ‡∏ä‡πà‡∏ô Pattaya Beach Run 2026";
                document.getElementById('new-submitter').placeholder = "‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•";
            } else {
                document.getElementById('new-title').placeholder = "e.g. Pattaya Beach Run 2026";
                document.getElementById('new-submitter').placeholder = "Full Name";
            }
            
            renderFeatured();
        }

        // --- Render 10 Featured Events ---
        function renderFeatured() {
            const container = document.getElementById('featured-container');
            
            // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô Error ‡∏Å‡∏£‡∏ì‡∏µ eventsData ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏≤
            if (!eventsData) return;

            // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏°‡∏≤ 10 ‡∏á‡∏≤‡∏ô‡πÅ‡∏£‡∏Å
            const featured = eventsData.slice(0, 10);
            
            if(featured.length > 0) {
                // ‡∏Å‡∏£‡∏ì‡∏µ‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•: ‡∏ß‡∏≤‡∏î‡∏Å‡∏≤‡∏£‡πå‡∏î‡∏≠‡∏≠‡∏Å‡∏°‡∏≤
                container.innerHTML = featured.map(e => `
                    <div class="bg-white rounded-2xl shadow-soft border border-slate-100 overflow-hidden group hover:shadow-lg transition cursor-pointer flex flex-col h-full" onclick="window.location.href='detail.html?id=${e.id}&lang=${currentLang}'">
                        <div class="h-48 overflow-hidden relative">
                            <img src="${e.image}" class="w-full h-full object-cover group-hover:scale-105 transition duration-500">
                            <div class="absolute top-3 right-3 bg-white/90 backdrop-blur px-2 py-1 rounded text-[10px] font-bold text-slate-700 shadow-sm flex items-center gap-1">
                                <span class="w-2 h-2 rounded-full bg-action-500"></span> ${e.type}
                            </div>
                        </div>
                        <div class="p-4 flex flex-col flex-grow">
                            <div class="flex items-center gap-2 text-xs font-bold text-brand-600 mb-2">
                                üìÖ ${e.date}
                            </div>
                            <h3 class="text-base font-bold text-slate-900 mb-2 line-clamp-2 group-hover:text-brand-600 transition">${currentLang==='th'?e.title_th:e.title_en}</h3>
                            <div class="text-xs text-slate-500 flex items-center gap-1 mb-3">
                                üìç ${currentLang==='th'?e.location_th:e.location_en}
                            </div>
                            
                            <div class="mt-auto pt-3 border-t border-slate-50 flex justify-between items-center">
                                <span class="text-[10px] bg-action-50 text-action-700 px-2 py-1 rounded border border-action-100 font-semibold">‡∏£‡∏±‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ú‡πà‡∏≤‡∏ô‡∏£‡∏∞‡∏ö‡∏ö</span>
                                <span class="text-xs text-slate-400">üëâ ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</span>
                            </div>
                        </div>
                    </div>
                `).join('');
            } else {
                // ‡∏Å‡∏£‡∏ì‡∏µ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Database ‡∏ß‡πà‡∏≤‡∏á)
                container.innerHTML = `<div class="col-span-full text-center py-10 text-slate-400">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏á‡∏≤‡∏ô‡∏ß‡∏¥‡πà‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö (‡∏•‡∏≠‡∏á‡∏Å‡∏î‡∏ù‡∏≤‡∏Å‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏î‡∏π‡∏™‡∏¥!)</div>`;
            }
        } 
        // (‡∏•‡∏ö‡∏õ‡∏µ‡∏Å‡∏Å‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏ô‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß)

        // --- Modal Logic ---
        function openSubmitModal() { document.getElementById('submit-modal').classList.remove('invisible'); document.getElementById('submit-modal').classList.add('active'); }
        function closeSubmitModal() { document.getElementById('submit-modal').classList.remove('active'); setTimeout(()=>document.getElementById('submit-modal').classList.add('invisible'), 200); }
        
        // (‡∏•‡∏ö‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô handleFormSubmit ‡∏ï‡∏±‡∏ß‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏≠‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ï‡∏±‡∏ß‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô js/data.js)

        document.addEventListener('DOMContentLoaded', () => {
            renderFeatured();
        });
    </script>